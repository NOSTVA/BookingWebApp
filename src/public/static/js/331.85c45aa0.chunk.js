"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[331],{3827:function(e,n,i){i.d(n,{Z:function(){return ne}});var t=i(2791),l=i(2746),r=i(4165),s=i(4942),a=i(5861),c=i(9439),d=i(1413),u=i(5090),o=i(9696),h=i(1813),x=i(1364),p=i(5802),f=i(8733),j=i(7588),m=i(2940),v=i(5606),g=i(9381),C=i(3080),T=i(6108),Z=i(4387),b=i(2872),w=i(4475),E=i(7251),N=i(7807),k=i(3978),A=i(4627),y=i(7422),I=i(4802),F=i(3771),S=i(7653),L=i(9718),z=i(884),D=i(2631),O=i(625),B=i(7908),_=i(2577),U=i(7460),K=i(9492),H=i(6773),J=i(2063),W=i(8108),Y=i(6390),q=i(9454),P=i(696),Q=i(7845),V=i(7201),M=i(184);function $(e){var n=e.applicants,i=e.permission,u=e.isFetching,o=(0,Q.br)(),L=(0,c.Z)(o,1)[0],z=(0,Q.t3)(),D=(0,c.Z)(z,1)[0],O=(0,t.useState)({}),B=(0,c.Z)(O,2),_=B[0],U=B[1];function K(e){return H.apply(this,arguments)}function H(){return(H=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({id:n,data:_[n]});case 2:U((function(e){var i=(0,d.Z)({},e);return delete i[n],i}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){U((function(n){var i=(0,d.Z)({},n);return delete i[e],i}))}function q(e,n,i){U((function(t){return(0,d.Z)((0,d.Z)({},t),{},(0,s.Z)({},e,(0,d.Z)((0,d.Z)({},t[e]),{},(0,s.Z)({},n,i))))}))}function P(e,i){U((function(t){return(0,d.Z)((0,d.Z)({},t),{},(0,s.Z)({},e,(0,d.Z)((0,d.Z)({},t[e]),{},(0,s.Z)({},i,n.find((function(n){return n._id===e}))[i]))))}))}return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.x,{children:(0,M.jsxs)(x.i,{size:"sm",children:[(0,M.jsx)(p.h,{children:(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(j.Th,{textAlign:"center",children:"Image"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"First Name"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Last Name"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Passport"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Date Of Birth"}),!(0,V.eI)(i,"delete")&&(0,M.jsx)(j.Th,{textAlign:"center",children:"Actions"})]})}),(0,M.jsx)(m.p,{children:n.length>0?n.map((function(e){var n,t,r,s,a,c,d,o,h,x=e._id,p=void 0===x?null:x,j=e.firstName,m=e.lastName,z=e.passportNumber,D=e.dateOfBirth,O=e.image;return(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(g.q,{style:{cursor:"pointer"},src:O,as:C.r,href:O,target:"_blank"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"firstName",handleEditClick:K,handleCancelClick:Y,handleEdit:P,handleChange:q,value:null!==(n=null===(t=_[p])||void 0===t?void 0:t.firstName)&&void 0!==n?n:j,isFetching:u,id:p})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"lastName",handleEditClick:K,handleCancelClick:Y,handleEdit:P,handleChange:q,value:null!==(r=null===(s=_[p])||void 0===s?void 0:s.lastName)&&void 0!==r?r:m,isFetching:u,id:p})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"passportNumber",handleEditClick:K,handleCancelClick:Y,handleEdit:P,handleChange:q,isFetching:u,id:p,value:null!==(a=null===(c=_[p])||void 0===c?void 0:c.passportNumber)&&void 0!==a?a:z})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"dateOfBirth",handleEditClick:K,handleCancelClick:Y,handleEdit:P,handleChange:q,isFetching:u,id:p,value:null!==(d=null===(o=_[p])||void 0===o||null===(h=o.dateOfBirth)||void 0===h?void 0:h.split("T")[0])&&void 0!==d?d:D.split("T")[0]})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsxs)(l.K,{direction:"row",align:"center",justify:"center",children:[!(0,V.eI)(i,"delete")&&(0,M.jsx)(T.h,{"aria-label":"Delete",size:"sm",icon:(0,M.jsx)(J.p,{}),onClick:function(){L(p)}}),!(0,V.eI)(i,"copy_code")&&(0,M.jsxs)(Z.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(b.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Copy code",size:"sm",icon:(0,M.jsx)(W.T,{})})}),(0,M.jsxs)(w.y,{width:600,textAlign:"left",children:[(0,M.jsx)(E.Y,{fontWeight:"semibold",children:"Code"}),(0,M.jsx)(N.Q,{}),(0,M.jsx)(k.u,{}),(0,M.jsx)(A.b,{children:(0,M.jsx)(y.E,{whiteSpace:"pre-wrap",sx:{wordBreak:"break-all"},maxH:400,overflowY:"scroll",children:(0,V.OS)(e)})}),(0,M.jsx)(I.D,{display:"flex",justifyContent:"flex-end",children:(0,M.jsx)(F.h,{size:"sm",children:(0,M.jsx)(S.z,{colorScheme:"blue",onClick:function(){return navigator.clipboard.writeText((0,V.OS)(e))},children:"Copy"})})})]})]})]})})]},p)})):(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"})]})})]})})})}function X(e){var n,i,p,j,g,C,B,_,U,K,H,W,P,$,X,ee=e.permission,ne=e.appointment,ie=e.attributes,te=e.isFetching,le=ie.ownerEmuns,re=ie.visaEmuns,se=ie.statusEmuns,ae=ne._id,ce=ne.numberOfApplicants,de=ne.expectedTravelDate,ue=ne.email,oe=ne.phone,he=ne.note,xe=ne.status,pe=ne.owner,fe=ne.visa,je=(0,Q.wv)(),me=je.data,ve=je.isLoading,ge=(0,Q.eE)(),Ce=(0,c.Z)(ge,1)[0],Te=(0,Q.EU)(),Ze=(0,c.Z)(Te,1)[0],be=(0,Q.c6)(),we=(0,c.Z)(be,1)[0],Ee=(0,Q.IN)(),Ne=(0,c.Z)(Ee,1)[0],ke=(0,t.useState)({}),Ae=(0,c.Z)(ke,2),ye=Ae[0],Ie=Ae[1],Fe=(0,t.useState)({}),Se=(0,c.Z)(Fe,2),Le=Se[0],ze=Se[1],De=(0,L.S)({base:"default",md:"fixed"});function Oe(){return Oe=(0,a.Z)((0,r.Z)().mark((function e(n,i){var t,l,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.userId,l=i.appointmentId,!(a=n.target.checked)){e.next=7;break}return e.next=5,we({userId:t,appointmentId:l});case 5:e.next=9;break;case 7:return e.next=9,Ze({userId:t,appointmentId:l});case 9:Ie((function(e){return(0,d.Z)((0,d.Z)({},e),{},(0,s.Z)({},t,a))}));case 10:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function Be(e){Ne({id:e,data:Le[e]}),ze((function(n){var i=(0,d.Z)({},n);return delete i[e],i}))}function _e(e,n){ze((function(i){return(0,d.Z)((0,d.Z)({},i),{},(0,s.Z)({},e,(0,d.Z)((0,d.Z)({},i[e]),{},(0,s.Z)({},n,ne[n]))))}))}function Ue(e){ze((function(n){var i=(0,d.Z)({},n);return delete i[e],i}))}function Ke(e,n,i){ze((function(t){return(0,d.Z)((0,d.Z)({},t),{},(0,s.Z)({},e,(0,d.Z)((0,d.Z)({},t[e]),{},(0,s.Z)({},n,i))))}))}function He(e,n){Ne({id:ae,data:(0,s.Z)({},n,e.target.value)})}return(0,t.useEffect)((function(){if(!ve){var e={};null===me||void 0===me||me.user.map((function(n){return e[n._id]=function(e,n){return n.assignedUsers.includes(e)}(n._id,ne)})),Ie(e)}}),[ne,ve,me]),(0,M.jsxs)(l.K,{direction:"row",children:[(0,M.jsx)(u.Z,{mb:5,size:"sm",width:"full",children:(0,M.jsx)(o.e,{children:(0,M.jsx)(h.x,{children:(0,M.jsx)(x.i,{size:"sm",layout:De,width:"full",variant:"simple",children:(0,M.jsxs)(m.p,{children:[(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Expected Travel Date:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ee,fieldName:"expectedTravelDate",handleEditClick:Be,handleCancelClick:Ue,handleEdit:_e,handleChange:Ke,isFetching:te,id:ae,value:null!==(n=null===(i=Le[ae])||void 0===i||null===(p=i.expectedTravelDate)||void 0===p?void 0:p.split("T")[0])&&void 0!==n?n:de.split("T")[0]})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Status:"})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(R,{permission:ee,fieldName:"status",value:null!==(j=null===(g=Le[ae])||void 0===g?void 0:g.status)&&void 0!==j?j:xe,handleChange:He,enums:se,isFetching:te})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Email:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ee,fieldName:"email",handleEditClick:Be,handleCancelClick:Ue,handleEdit:_e,handleChange:Ke,isFetching:te,id:ae,value:null!==(C=null===(B=Le[ae])||void 0===B?void 0:B.email)&&void 0!==C?C:ue})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Visa:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(R,{permission:ee,fieldName:"visa",value:null!==(_=null===(U=Le[ae])||void 0===U?void 0:U.visa)&&void 0!==_?_:fe,handleChange:He,enums:re,isFetching:te})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Mobile Number:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:ee,fieldName:"phone",handleEditClick:Be,handleCancelClick:Ue,handleEdit:_e,handleChange:Ke,isFetching:te,id:ae,value:null!==(K=null===(H=Le[ae])||void 0===H?void 0:H.phone)&&void 0!==K?K:oe})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Owner:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(R,{permission:ee,fieldName:"owner",value:null!==(W=null===(P=Le[ae])||void 0===P?void 0:P.owner)&&void 0!==W?W:pe,handleChange:He,enums:le,isFetching:te})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"Note:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ee,fieldName:"note",handleEditClick:Be,handleCancelClick:Ue,handleEdit:_e,handleChange:Ke,isFetching:te,id:ae,value:null!==($=null===(X=Le[ae])||void 0===X?void 0:X.note)&&void 0!==$?$:he||"-"})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(z.x,{as:"b",children:"No. Applicants:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(z.x,{children:null===ce||void 0===ce?void 0:ce.toString()})})]})]})})})})}),(0,M.jsxs)(l.K,{children:[!(0,V.eI)(ee,"delete")&&(0,M.jsx)(D.u,{label:"Delete",placement:"right",children:(0,M.jsx)(T.h,{"aria-label":"Delete",size:"sm",icon:(0,M.jsx)(J.p,{}),variant:"outline",onClick:function(){return Ce(ae)}})}),!(0,V.eI)(ee,"assign")&&(0,M.jsxs)(Z.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(b.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Assign",size:"sm",icon:(0,M.jsx)(Y.V,{})})}),(0,M.jsxs)(w.y,{children:[(0,M.jsx)(E.Y,{fontWeight:"semibold",children:"Users"}),(0,M.jsx)(N.Q,{}),(0,M.jsx)(k.u,{}),(0,M.jsx)(A.b,{children:!ve&&(null===me||void 0===me?void 0:me.user.map((function(e){var n=e.email,i=e._id;return(0,M.jsx)(O.X,{onChange:function(e){return function(e,n){return Oe.apply(this,arguments)}(e,{userId:i,appointmentId:ae})},isChecked:ye[i],children:n},i)})))})]})]}),!(0,V.eI)(ee,"copy_email")&&(0,M.jsxs)(Z.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(b.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Copy code",size:"sm",icon:(0,M.jsx)(q.K,{})})}),(0,M.jsxs)(w.y,{width:600,textAlign:"left",children:[(0,M.jsx)(E.Y,{fontWeight:"semibold",children:"Code"}),(0,M.jsx)(N.Q,{}),(0,M.jsx)(k.u,{}),(0,M.jsx)(A.b,{children:(0,M.jsx)(y.E,{width:"full",whiteSpace:"pre-wrap",sx:{wordBreak:"break-all"},children:(0,V.aH)(ne.email)})}),(0,M.jsx)(I.D,{display:"flex",justifyContent:"flex-end",children:(0,M.jsx)(F.h,{size:"sm",children:(0,M.jsx)(S.z,{colorScheme:"blue",onClick:function(){return navigator.clipboard.writeText((0,V.aH)(ne.email))},children:"Copy"})})})]})]})]})]})}function G(e){var n=e.permission,i=e.fieldName,t=e.value,l=e.id,r=e.handleEditClick,s=e.handleCancelClick,a=e.handleEdit,c=e.handleChange,d=e.isFetching;return(0,V.eI)(n,i)?(0,M.jsx)(z.x,{textAlign:"center",children:t}):(0,M.jsxs)(B.C,{onSubmit:function(){return r(l)},onCancel:function(){return s(l)},onEdit:function(){return a(l,i)},isDisabled:(0,V.eI)(n,i),submitOnBlur:!1,value:t,children:[d?(0,M.jsx)(_.$,{}):(0,M.jsx)(D.u,{label:"Click to edit",children:(0,M.jsx)(U.w,{})}),(0,M.jsx)(K.V,{onChange:function(e){return c(l,i,e.target.value)}})]})}function R(e){var n=e.permission,i=e.fieldName,t=e.value,l=e.handleChange,r=e.enums,s=e.isFetching;return(0,V.eI)(n,i)?(0,M.jsx)(z.x,{textAlign:"center",children:t}):(0,M.jsx)(H.P,{textAlign:"center",size:"sm",value:t,icon:s?(0,M.jsx)(_.$,{}):(0,M.jsx)(P.v,{}),onChange:function(e){return l(e,i)},children:r.map((function(e,n){return(0,M.jsx)("option",{value:e,children:e},n)}))})}var ee=function(e){var n=e.appointment,i=e.attributes,t=e.permission,l=e.isFetching,r=n.applicants,s=n.expectedTravelDate,a=n.email,c=n.phone,h=r.map((function(e){return(0,d.Z)((0,d.Z)({},e),{},{dateOfBirth:e.dateOfBirth.split("T")[0],expectedTravelDate:s.split("T")[0],email:a,phone:c})}));return(0,M.jsx)(u.Z,{variant:"outline",size:"sm",children:(0,M.jsxs)(o.e,{children:[(0,M.jsx)(X,{permission:t,appointment:n,attributes:i,isFetching:l}),(0,M.jsx)($,{permission:t,applicants:h,isFetching:l})]})})};var ne=function(e){var n=e.permission,i=e.appointments,t=e.attributes,r=e.isFetching;return(0,M.jsx)(l.K,{spacing:5,children:i.map((function(e){return(0,M.jsx)(ee,{appointment:e,attributes:t,permission:n,isFetching:r},e._id)}))})}},4063:function(e,n,i){i.d(n,{Z:function(){return f}});var t=i(5090),l=i(9696),r=i(2746),s=(i(2791),i(5325)),a=i(548),c=i(184);var d=function(e){var n=e.searchTerm,i=e.setSearchTerm;return(0,c.jsx)(s.NI,{children:(0,c.jsx)(a.I,{variant:"filled",type:"text",placeholder:"Search by passport number",value:n,onChange:function(e){return i(e.target.value)}})})},u=i(4942),o=i(1413),h=i(6773);var x=function(e){var n=e.options,i=e.value,t=e.onChange;return(0,c.jsxs)(h.P,{value:i,onChange:function(e){return t(e.target.value)},children:[(0,c.jsx)("option",{value:"",children:"All"}),n.map((function(e,n){return(0,c.jsx)("option",{value:e,children:e},n)}))]})},p=function(e){var n=e.filterField,i=e.setFilterFields,t=e.attributes,l=function(e,n){i((function(i){return(0,o.Z)((0,o.Z)({},i),{},(0,u.Z)({},e,n))}))};return(0,c.jsxs)(r.K,{direction:"row",children:[(0,c.jsx)(x,{options:t.ownerEmuns,value:n.owner,onChange:function(e){return l("owner",e)}}),(0,c.jsx)(x,{options:t.visaEmuns,value:n.visa,onChange:function(e){return l("visa",e)}}),(0,c.jsx)(x,{options:t.statusEmuns,value:n.status,onChange:function(e){return l("status",e)}})]})};var f=function(e){var n=e.searchTerm,i=e.setSearchTerm,s=e.filterField,a=e.setFilterFields,u=e.attributes;return(0,c.jsx)(t.Z,{variant:"outline",size:"sm",children:(0,c.jsx)(l.e,{children:(0,c.jsxs)(r.K,{children:[(0,c.jsx)(d,{searchTerm:n,setSearchTerm:i}),(0,c.jsx)(p,{filterField:s,setFilterFields:a,attributes:u})]})})})}},7201:function(e,n,i){i.d(n,{OS:function(){return t},aH:function(){return l},eI:function(){return r},nU:function(){return s}});var t=function(e){return"\n      let index = 0;\n      applicant = ".concat(JSON.stringify(e),'\n      document.querySelector("app-no-form #phone").dispatchEvent(new Event("ngModelChange"));\n\n        await fillInput("name", applicant.firstName, index);\n        await fillInput("surname", applicant.lastName, index);\n        await fillInput("birthLocalDate", applicant.dateOfBirth, index);\n        await fillInput("passport", applicant.passportNumber, index);\n        await fillInput("applicantEmail", applicant.email, index);\n        await fillInput("phone", applicant.phone, index);\n        await fillInput("expectedDepartureLocalDate",applicant.expectedTravelDate,index);\n\n      \n      async function fillInput(field, value, folderIndex) {\n        let ele = document.querySelectorAll(\n          \'app-no-form form input[name="\' + field +\'"]\'\n        )[folderIndex];\n        ele.value = value;\n        ele.dispatchEvent(new Event("input"));\n        ele.dispatchEvent(new Event("change"));\n        ele.dispatchEvent(new Event("compositionend"));\n      }\n      ')},l=function(e){return'\n      document.getElementsByName("email")[1].value = "'.concat(e,'";\n      document.getElementsByName("password")[0].value  =\xa0"Ahmed2842663";\n      \n      ')},r=function(e,n){switch(e){case"admin":return!1;case"static":default:return!0;case"createdBy":return"assign"===n;case"assigned":return"status"!==n&&"email"!==n}},s=function(e,n,i){return e.filter((function(e){return 0===e.applicants.length||e.applicants.some((function(e){return e[n].startsWith(i.toUpperCase())}))}))}}}]);
//# sourceMappingURL=331.85c45aa0.chunk.js.map