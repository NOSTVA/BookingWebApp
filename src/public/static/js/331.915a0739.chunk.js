"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[331],{3827:function(e,n,i){i.d(n,{Z:function(){return ne}});var t=i(2791),l=i(751),r=i(4165),s=i(4942),a=i(1413),c=i(5861),d=i(9439),u=i(2899),o=i(3303),h=i(1900),x=i(2732),p=i(553),f=i(3129),j=i(5237),m=i(8500),v=i(4004),g=i(1975),C=i(3466),T=i(7885),Z=i(8537),b=i(9229),w=i(5291),E=i(4781),N=i(3627),k=i(954),A=i(7259),y=i(5993),I=i(807),F=i(8574),L=i(2863),z=i(7899),S=i(8367),D=i(6907),B=i(2435),_=i(1683),O=i(3204),U=i(6437),K=i(673),H=i(8886),J=i(1243),W=i(4695),Y=i(8650),q=i(6716),P=i(7623),Q=i(7845),V=i(7201),M=i(184);function $(e){var n=e.applicants,i=e.permission,u=e.isFetching,o=(0,Q.br)(),Z=(0,d.Z)(o,1)[0],b=(0,Q.t3)(),w=(0,d.Z)(b,1)[0],E=(0,t.useState)({}),N=(0,d.Z)(E,2),k=N[0],A=N[1];function y(e){return I.apply(this,arguments)}function I(){return(I=(0,c.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({id:n,data:k[n]});case 2:A((function(e){var i=(0,a.Z)({},e);return delete i[n],i}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){A((function(n){var i=(0,a.Z)({},n);return delete i[e],i}))}function L(e,n,i){A((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},t[e]),{},(0,s.Z)({},n,i))))}))}function z(e,i){A((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},t[e]),{},(0,s.Z)({},i,n.find((function(n){return n._id===e}))[i]))))}))}return(0,M.jsx)(h.x,{children:(0,M.jsxs)(x.i,{size:"sm",children:[(0,M.jsx)(p.h,{children:(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(j.Th,{textAlign:"center",children:"Image"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"First Name"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Last Name"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Passport"}),(0,M.jsx)(j.Th,{textAlign:"center",children:"Date Of Birth"}),!(0,V.eI)(i,"delete")&&(0,M.jsx)(j.Th,{textAlign:"center",children:"Actions"})]})}),(0,M.jsx)(m.p,{children:n.length>0?n.map((function(e){var n,t,r,s,a,c,d,o,h,x=e._id,p=void 0===x?null:x,j=e.firstName,m=e.lastName,b=e.passportNumber,w=e.dateOfBirth,E=e.image;return(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(g.q,{style:{cursor:"pointer"},src:E,as:C.r,href:E,target:"_blank"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"firstName",handleEditClick:y,handleCancelClick:F,handleEdit:z,handleChange:L,value:null!==(n=null===(t=k[p])||void 0===t?void 0:t.firstName)&&void 0!==n?n:j,isFetching:u,id:p})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"lastName",handleEditClick:y,handleCancelClick:F,handleEdit:z,handleChange:L,value:null!==(r=null===(s=k[p])||void 0===s?void 0:s.lastName)&&void 0!==r?r:m,isFetching:u,id:p})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"passportNumber",handleEditClick:y,handleCancelClick:F,handleEdit:z,handleChange:L,isFetching:u,id:p,value:null!==(a=null===(c=k[p])||void 0===c?void 0:c.passportNumber)&&void 0!==a?a:b})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:i,fieldName:"dateOfBirth",handleEditClick:y,handleCancelClick:F,handleEdit:z,handleChange:L,isFetching:u,id:p,value:null!==(d=null===(o=k[p])||void 0===o||null===(h=o.dateOfBirth)||void 0===h?void 0:h.split("T")[0])&&void 0!==d?d:w.split("T")[0]})}),!(0,V.eI)(i,"delete")&&(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(l.K,{direction:"row",align:"center",justify:"center",children:(0,M.jsx)(T.h,{"aria-label":"Delete",size:"sm",icon:(0,M.jsx)(J.p,{}),onClick:function(){Z(p)}})})})]},p)})):(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"}),(0,M.jsx)(v.Td,{textAlign:"center",children:"NULL"})]})})]})})}function X(e){var n,i,p,j,g,C,_,O,U,K,H,P,$,X,ee,ne=e.permission,ie=e.appointment,te=e.attributes,le=e.isFetching,re=te.ownerEmuns,se=te.visaEmuns,ae=te.statusEmuns,ce=ie._id,de=ie.numberOfApplicants,ue=ie.expectedTravelDate,oe=ie.email,he=ie.phone,xe=ie.note,pe=ie.status,fe=ie.owner,je=ie.visa,me=(0,Q.wv)(),ve=me.data,ge=me.isLoading,Ce=(0,Q.eE)(),Te=(0,d.Z)(Ce,1)[0],Ze=(0,Q.EU)(),be=(0,d.Z)(Ze,1)[0],we=(0,Q.c6)(),Ee=(0,d.Z)(we,1)[0],Ne=(0,Q.IN)(),ke=(0,d.Z)(Ne,1)[0],Ae=(0,t.useState)({}),ye=(0,d.Z)(Ae,2),Ie=ye[0],Fe=ye[1],Le=(0,t.useState)({}),ze=(0,d.Z)(Le,2),Se=ze[0],De=ze[1],Be=(0,Z.S)({base:"default",md:"fixed"});function _e(){return _e=(0,c.Z)((0,r.Z)().mark((function e(n,i){var t,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.userId,l=i.appointmentId,!(c=n.target.checked)){e.next=7;break}return e.next=5,Ee({userId:t,appointmentId:l});case 5:e.next=9;break;case 7:return e.next=9,be({userId:t,appointmentId:l});case 9:Fe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,s.Z)({},t,c))}));case 10:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}function Oe(e){ke({id:e,data:Se[e]}),De((function(n){var i=(0,a.Z)({},n);return delete i[e],i}))}function Ue(e,n){De((function(i){return(0,a.Z)((0,a.Z)({},i),{},(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},i[e]),{},(0,s.Z)({},n,ie[n]))))}))}function Ke(e){De((function(n){var i=(0,a.Z)({},n);return delete i[e],i}))}function He(e,n,i){De((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},t[e]),{},(0,s.Z)({},n,i))))}))}function Je(e,n){ke({id:ce,data:(0,s.Z)({},n,e.target.value)})}return(0,t.useEffect)((function(){if(!ge){var e={};null===ve||void 0===ve||ve.user.map((function(n){return e[n._id]=function(e,n){return n.assignedUsers.includes(e)}(n._id,ie)})),Fe(e)}}),[ie,ge,ve]),(0,M.jsxs)(l.K,{direction:"row",children:[(0,M.jsx)(u.Z,{mb:5,size:"sm",width:"full",children:(0,M.jsx)(o.e,{children:(0,M.jsx)(h.x,{children:(0,M.jsx)(x.i,{size:"sm",layout:Be,width:"full",variant:"simple",children:(0,M.jsxs)(m.p,{children:[(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Expected Travel Date:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ne,fieldName:"expectedTravelDate",handleEditClick:Oe,handleCancelClick:Ke,handleEdit:Ue,handleChange:He,isFetching:le,id:ce,value:null!==(n=null===(i=Se[ce])||void 0===i||null===(p=i.expectedTravelDate)||void 0===p?void 0:p.split("T")[0])&&void 0!==n?n:ue.split("T")[0]})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Status:"})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(R,{permission:ne,fieldName:"status",value:null!==(j=null===(g=Se[ce])||void 0===g?void 0:g.status)&&void 0!==j?j:pe,handleChange:Je,enums:ae,isFetching:le})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Email:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ne,fieldName:"email",handleEditClick:Oe,handleCancelClick:Ke,handleEdit:Ue,handleChange:He,isFetching:le,id:ce,value:null!==(C=null===(_=Se[ce])||void 0===_?void 0:_.email)&&void 0!==C?C:oe})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Visa:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(R,{permission:ne,fieldName:"visa",value:null!==(O=null===(U=Se[ce])||void 0===U?void 0:U.visa)&&void 0!==O?O:je,handleChange:Je,enums:se,isFetching:le})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Mobile Number:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(G,{permission:ne,fieldName:"phone",handleEditClick:Oe,handleCancelClick:Ke,handleEdit:Ue,handleChange:He,isFetching:le,id:ce,value:null!==(K=null===(H=Se[ce])||void 0===H?void 0:H.phone)&&void 0!==K?K:he})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Owner:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(R,{permission:ne,fieldName:"owner",value:null!==(P=null===($=Se[ce])||void 0===$?void 0:$.owner)&&void 0!==P?P:fe,handleChange:Je,enums:re,isFetching:le})})]}),(0,M.jsxs)(f.Tr,{children:[(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"Note:"})}),(0,M.jsx)(v.Td,{textAlign:"center",overflow:"clip",children:(0,M.jsx)(G,{permission:ne,fieldName:"note",handleEditClick:Oe,handleCancelClick:Ke,handleEdit:Ue,handleChange:He,isFetching:le,id:ce,value:null!==(X=null===(ee=Se[ce])||void 0===ee?void 0:ee.note)&&void 0!==X?X:xe||"-"})}),(0,M.jsx)(v.Td,{children:(0,M.jsx)(b.x,{as:"b",children:"No. Applicants:"})}),(0,M.jsx)(v.Td,{textAlign:"center",children:(0,M.jsx)(b.x,{children:null===de||void 0===de?void 0:de.toString()})})]})]})})})})}),(0,M.jsxs)(l.K,{children:[!(0,V.eI)(ne,"delete")&&(0,M.jsx)(w.u,{label:"Delete",placement:"right",children:(0,M.jsx)(T.h,{"aria-label":"Delete",size:"sm",icon:(0,M.jsx)(J.p,{}),variant:"outline",onClick:function(){return Te(ce)}})}),!(0,V.eI)(ne,"assign")&&(0,M.jsxs)(E.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(N.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Assign",size:"sm",icon:(0,M.jsx)(W.V,{})})}),(0,M.jsxs)(k.y,{children:[(0,M.jsx)(A.Y,{fontWeight:"semibold",children:"Users"}),(0,M.jsx)(y.Q,{}),(0,M.jsx)(I.u,{}),(0,M.jsx)(F.b,{children:!ge&&(null===ve||void 0===ve?void 0:ve.user.map((function(e){var n=e.email,i=e._id;return(0,M.jsx)(L.X,{onChange:function(e){return function(e,n){return _e.apply(this,arguments)}(e,{userId:i,appointmentId:ce})},isChecked:Ie[i],children:n},i)})))})]})]}),!(0,V.eI)(ne,"copy_code")&&(0,M.jsxs)(E.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(N.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Copy code",size:"sm",icon:(0,M.jsx)(Y.T,{})})}),(0,M.jsxs)(k.y,{width:600,textAlign:"left",children:[(0,M.jsx)(A.Y,{fontWeight:"semibold",children:"Code"}),(0,M.jsx)(y.Q,{}),(0,M.jsx)(I.u,{}),(0,M.jsx)(F.b,{children:(0,M.jsx)(z.E,{whiteSpace:"pre-wrap",sx:{wordBreak:"break-all"},maxH:400,overflowY:"scroll",children:(0,V.L7)(ie)})}),(0,M.jsx)(S.D,{display:"flex",justifyContent:"flex-end",children:(0,M.jsx)(D.h,{size:"sm",children:(0,M.jsx)(B.z,{colorScheme:"blue",onClick:function(){return navigator.clipboard.writeText((0,V.L7)(ie))},children:"Copy"})})})]})]}),!(0,V.eI)(ne,"copy_email")&&(0,M.jsxs)(E.J,{placement:"left",isLazy:!0,children:[(0,M.jsx)(N.x,{children:(0,M.jsx)(T.h,{variant:"outline","aria-label":"Copy code",size:"sm",icon:(0,M.jsx)(q.K,{})})}),(0,M.jsxs)(k.y,{width:600,textAlign:"left",children:[(0,M.jsx)(A.Y,{fontWeight:"semibold",children:"Code"}),(0,M.jsx)(y.Q,{}),(0,M.jsx)(I.u,{}),(0,M.jsx)(F.b,{children:(0,M.jsx)(z.E,{width:"full",whiteSpace:"pre-wrap",sx:{wordBreak:"break-all"},children:(0,V.aH)(ie.email)})}),(0,M.jsx)(S.D,{display:"flex",justifyContent:"flex-end",children:(0,M.jsx)(D.h,{size:"sm",children:(0,M.jsx)(B.z,{colorScheme:"blue",onClick:function(){return navigator.clipboard.writeText((0,V.aH)(ie.email))},children:"Copy"})})})]})]})]})]})}function G(e){var n=e.permission,i=e.fieldName,t=e.value,l=e.id,r=e.handleEditClick,s=e.handleCancelClick,a=e.handleEdit,c=e.handleChange,d=e.isFetching;return(0,V.eI)(n,i)?(0,M.jsx)(b.x,{textAlign:"center",children:t}):(0,M.jsxs)(_.C,{onSubmit:function(){return r(l)},onCancel:function(){return s(l)},onEdit:function(){return a(l,i)},isDisabled:(0,V.eI)(n,i),submitOnBlur:!1,value:t,children:[d?(0,M.jsx)(O.$,{}):(0,M.jsx)(w.u,{label:"Click to edit",children:(0,M.jsx)(U.w,{})}),(0,M.jsx)(K.V,{onChange:function(e){return c(l,i,e.target.value)}})]})}function R(e){var n=e.permission,i=e.fieldName,t=e.value,l=e.handleChange,r=e.enums,s=e.isFetching;return(0,V.eI)(n,i)?(0,M.jsx)(b.x,{textAlign:"center",children:t}):(0,M.jsx)(H.P,{textAlign:"center",size:"sm",value:t,icon:s?(0,M.jsx)(O.$,{}):(0,M.jsx)(P.v,{}),onChange:function(e){return l(e,i)},children:r.map((function(e,n){return(0,M.jsx)("option",{value:e,children:e},n)}))})}var ee=function(e){var n=e.appointment,i=e.attributes,t=e.permission,l=e.isFetching,r=n.applicants;return(0,M.jsx)(u.Z,{variant:"outline",size:"sm",children:(0,M.jsxs)(o.e,{children:[(0,M.jsx)(X,{permission:t,appointment:n,attributes:i,isFetching:l}),(0,M.jsx)($,{permission:t,applicants:r,isFetching:l})]})})};var ne=function(e){var n=e.permission,i=e.appointments,t=e.attributes,r=e.isFetching;return(0,M.jsx)(l.K,{spacing:5,children:i.map((function(e){return(0,M.jsx)(ee,{appointment:e,attributes:t,permission:n,isFetching:r},e._id)}))})}},4063:function(e,n,i){i.d(n,{Z:function(){return f}});var t=i(2899),l=i(3303),r=i(751),s=(i(2791),i(2392)),a=i(6069),c=i(184);var d=function(e){var n=e.searchTerm,i=e.setSearchTerm;return(0,c.jsx)(s.NI,{children:(0,c.jsx)(a.I,{variant:"filled",type:"text",placeholder:"Search by passport number",value:n,onChange:function(e){return i(e.target.value)}})})},u=i(4942),o=i(1413),h=i(8886);var x=function(e){var n=e.options,i=e.value,t=e.onChange;return(0,c.jsxs)(h.P,{value:i,onChange:function(e){return t(e.target.value)},children:[(0,c.jsx)("option",{value:"",children:"All"}),n.map((function(e,n){return(0,c.jsx)("option",{value:e,children:e},n)}))]})},p=function(e){var n=e.filterField,i=e.setFilterFields,t=e.attributes,l=function(e,n){i((function(i){return(0,o.Z)((0,o.Z)({},i),{},(0,u.Z)({},e,n))}))};return(0,c.jsxs)(r.K,{direction:"row",children:[(0,c.jsx)(x,{options:t.ownerEmuns,value:n.owner,onChange:function(e){return l("owner",e)}}),(0,c.jsx)(x,{options:t.visaEmuns,value:n.visa,onChange:function(e){return l("visa",e)}}),(0,c.jsx)(x,{options:t.statusEmuns,value:n.status,onChange:function(e){return l("status",e)}})]})};var f=function(e){var n=e.searchTerm,i=e.setSearchTerm,s=e.filterField,a=e.setFilterFields,u=e.attributes;return(0,c.jsx)(t.Z,{variant:"outline",size:"sm",children:(0,c.jsx)(l.e,{children:(0,c.jsxs)(r.K,{children:[(0,c.jsx)(d,{searchTerm:n,setSearchTerm:i}),(0,c.jsx)(p,{filterField:s,setFilterFields:a,attributes:u})]})})})}},7201:function(e,n,i){i.d(n,{L7:function(){return l},aH:function(){return r},eI:function(){return s},nU:function(){return a}});var t=i(1413),l=function(e){var n=e.applicants,i=e.email,l=e.phone,r=e.expectedTravelDate,s=n.map((function(e){return(0,t.Z)((0,t.Z)({},e),{},{dateOfBirth:e.dateOfBirth.split("T")[0],expectedTravelDate:r.split("T")[0],email:i,phone:l})}));return"\n      \n      applicants = ".concat(JSON.stringify(s),'\n      document\n        .querySelector("app-no-form #phone")\n        .dispatchEvent(new Event("ngModelChange"));\n      \n      applicants.map(async (applicant, index) => {\n        await fillInput("name", applicant.firstName, index);\n        await fillInput("surname", applicant.lastName, index);\n        await fillInput("birthLocalDate", applicant.dateOfBirth, index);\n        await fillInput("passport", applicant.passportNumber, index);\n        await fillInput("applicantEmail", applicant.email, index);\n        await fillInput("phone", applicant.phone, index);\n        await fillInput(\n          "expectedDepartureLocalDate",\n          applicant.expectedTravelDate,\n          index\n        );\n      });\n      \n      async function fillInput(field, value, folderIndex) {\n        let ele = document.querySelectorAll(\n          \'app-no-form form input[name="\' + field +\'"]\'\n        )[folderIndex];\n        ele.value = value;\n        ele.dispatchEvent(new Event("input"));\n        ele.dispatchEvent(new Event("change"));\n        ele.dispatchEvent(new Event("compositionend"));\n      }\n      ')},r=function(e){return'\n      document.getElementsByName("email")[1].value = "'.concat(e,'";\n      document.getElementsByName("password")[0].value  =\xa0"Ahmed@2842663";\n      \n      ')},s=function(e,n){switch(e){case"admin":return!1;case"static":default:return!0;case"createdBy":return"assign"===n;case"assigned":return"status"!==n&&"email"!==n}},a=function(e,n,i){return e.filter((function(e){return 0===e.applicants.length||e.applicants.some((function(e){return e[n].startsWith(i.toUpperCase())}))}))}}}]);
//# sourceMappingURL=331.915a0739.chunk.js.map