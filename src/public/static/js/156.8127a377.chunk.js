"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[156],{2156:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var a=t(8206),r=t(4087),i=t(2791),s=t(4942),l=t(3433),u=t(1413),c=t(4165),o=t(5861),p=t(9439),d=t(9229),h=t(6907),m=t(2435),x=t(751),f=t(2893),v=t(5946),j=t(2899),g=t(3303),b=t(2392),y=t(8208),I=t(6069),N=t(4125),w=t(311),C=t(2322),Z=t(8886),k=t(7885),S=t(3204),z=t(7845),E=t(2134),D=t(1836),A=t(7201),B=t(184),O=function(){var e=(0,z._C)(),n=(0,p.Z)(e,2),t=n[0],a=n[1],O=a.isLoading,P=a.data,T=a.isSuccess,J=(a.error,a.isError,(0,i.useState)("")),L=(0,p.Z)(J,2),U=L[0],K=(L[1],(0,i.useState)("")),W=(0,p.Z)(K,2),q=W[0],F=(W[1],(0,i.useState)("")),_=(0,p.Z)(F,2),H=_[0],X=(_[1],(0,i.useState)("")),Y=(0,p.Z)(X,2),$=Y[0],M=(Y[1],(0,i.useState)("")),R=(0,p.Z)(M,2),V=R[0],G=(R[1],(0,i.useState)("")),Q=(0,p.Z)(G,2),ee=Q[0],ne=Q[1],te=(0,i.useState)(!1),ae=(0,p.Z)(te,2),re=ae[0],ie=(ae[1],(0,i.useState)("")),se=(0,p.Z)(ie,2),le=se[0],ue=se[1],ce=(0,i.useState)(""),oe=(0,p.Z)(ce,2),pe=oe[0],de=oe[1],he=(0,i.useState)("none"),me=(0,p.Z)(he,2),xe=me[0],fe=me[1],ve=(0,i.useState)("none"),je=(0,p.Z)(ve,2),ge=je[0],be=je[1],ye=(0,i.useState)("pending"),Ie=(0,p.Z)(ye,2),Ne=Ie[0],we=Ie[1],Ce=(0,i.useState)(""),Ze=(0,p.Z)(Ce,2),ke=Ze[0],Se=Ze[1],ze=(0,i.useState)([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}]),Ee=(0,p.Z)(ze,2),De=Ee[0],Ae=Ee[1],Be=(0,z.PY)(),Oe=Be.data,Pe=Be.isSuccess,Te=(0,D.p)(),Je=re&&(""===ee||""===le);function Le(e){return e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,p.Z)(e,2);return[n[0],n[1].value]})))}))}var Ue=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var a,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=De.some((function(e){return!e.firstName.value||!e.lastName.value||!e.passportNumber.value})),!le.startsWith("0")){e.next=5;break}return Te({title:"Phone number shouldnt't start with 0",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 5:if(!(le.length<10)){e.next=8;break}return Te({title:"Phone number should be 10 numbers",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 8:if(""!==ee&&""!==le&&!a){e.next=11;break}return Te({title:"Please fill in all required fields",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 11:if(r=new Date,De.every((function(e){return new Date(e.dateOfBirth.value).getTime()<r.getTime()}))){e.next=16;break}return Te({title:"Please enter valid date of birth",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 16:return i={expectedTravelDate:n.target.elements.date.value,email:ee,phone:"+20"+le,owner:xe,visa:ge,status:Ne,note:ke,applicants:Le(De)},e.next=19,t(i);case 19:de(""),ne(""),ue(""),Ae([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}]);case 23:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){T&&Te({title:"Form submitted successfully!",description:(0,B.jsxs)(d.x,{children:["Copy code ?",(0,B.jsx)(h.h,{size:"sm",children:(0,B.jsx)(m.z,{onClick:function(){return navigator.clipboard.writeText((0,A.L7)((0,u.Z)((0,u.Z)({},P.appointment[0]),{},{applicants:P.applicants.map((function(e){return(0,p.Z)(e,1)[0]}))})))},children:"Copy"})})]}),status:"success",duration:null,isClosable:!0,position:"top"})}),[T,Te]);var Ke=function(e,n,t){var a=(0,l.Z)(De);a[e][n].value=t,Ae(a)},We=function(e){var n=(0,l.Z)(De);n.splice(e,1),Ae(n)};return(0,B.jsx)(x.K,{children:O?(0,B.jsx)(x.K,{alignItems:"center",children:(0,B.jsx)(S.$,{margin:10,thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})}):(0,B.jsxs)(x.K,{spacing:5,children:[(0,B.jsx)(v.X,{size:"lg",children:"Appointment"}),(0,B.jsxs)("form",{onSubmit:Ue,children:[(0,B.jsx)(j.Z,{variant:"outline",children:(0,B.jsxs)(g.e,{children:[(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Je,children:[(0,B.jsx)(y.l,{children:"Expected travel date"}),(0,B.jsx)(I.I,{name:"date",placeholder:"Select Date and Time",size:"md",type:"date",value:pe,onChange:function(e){return function(e){de(e.target.value)}(e)}}),(0,B.jsx)(N.J1,{children:H})]})}),(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Je,children:[(0,B.jsx)(y.l,{children:"Email"}),(0,B.jsx)(I.I,{placeholder:"Email",type:"email",value:ee,onChange:function(e){return ne(e.target.value)}}),(0,B.jsx)(N.J1,{children:$})]})}),(0,B.jsx)(r.xu,{children:(0,B.jsxs)(b.NI,{isInvalid:Je,children:[(0,B.jsx)(y.l,{children:"Phone number"}),(0,B.jsxs)(w.B,{children:[(0,B.jsx)(C.Ui,{children:"+20"}),(0,B.jsx)(I.I,{type:"tel",placeholder:"phone number",pattern:"[0-9]*",maxLength:"10",value:le,onKeyDown:function(e){"Backspace"!==e.key&&"Delete"!==e.key&&"a"!==e.key&&"A"!==e.key&&(/^\d+$/.test(e.key)||e.preventDefault())},onChange:function(e){return function(e){var n=e.target.value.replace(/\D/g,"");ue(n)}(e)}})]}),(0,B.jsx)(N.J1,{children:V})]})}),(0,B.jsxs)(f.U,{mt:5,children:[(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Owner"}),(0,B.jsx)(Z.P,{textAlign:"center",size:"sm",value:xe,onChange:function(e){return function(e){fe(e.target.value)}(e)},children:Pe&&Oe.attributes.ownerEmuns.map((function(e,n){return(0,B.jsx)("option",{value:e,children:e},n)}))})]}),(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Visa"}),(0,B.jsx)(Z.P,{textAlign:"center",value:ge,size:"sm",onChange:function(e){return function(e){be(e.target.value)}(e)},children:Pe&&Oe.attributes.visaEmuns.map((function(e,n){return(0,B.jsx)("option",{value:e,children:e},n)}))})]})]}),(0,B.jsxs)(f.U,{mt:5,children:[(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"status"}),(0,B.jsx)(Z.P,{textAlign:"center",value:Ne,size:"sm",onChange:function(e){return function(e){we(e.target.value)}(e)},children:Pe&&Oe.attributes.statusEmuns.map((function(e,n){return(0,B.jsx)("option",{value:e,children:e},n)}))})]}),(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Note"}),(0,B.jsx)(I.I,{placeholder:"-",textAlign:"center",value:ke,size:"sm",onChange:function(e){Se(e.target.value)}})]})]})]})}),(0,B.jsx)(v.X,{size:"lg",mt:4,children:"Applicants"}),De.map((function(e,n){return(0,B.jsx)(j.Z,{variant:"outline",mt:4,mb:4,children:(0,B.jsxs)(g.e,{children:[(0,B.jsx)(r.xu,{position:"absolute",top:1,right:2,children:De.length>1?(0,B.jsx)(k.h,{icon:(0,B.jsx)(E.oHP,{}),onClick:function(){return function(e){De.length>1&&Te({title:"Applicant deleted",status:"warning",duration:null,isClosable:!1,position:"top",render:function(){return(0,B.jsxs)(x.K,{bg:"gray.300",p:4,borderRadius:"3",children:[(0,B.jsx)(d.x,{color:"black",mb:2,children:"Are you sure you want to delete this applicant?"}),(0,B.jsxs)(f.U,{spacing:4,justifyContent:"center",children:[(0,B.jsx)(m.z,{colorScheme:"red",fontWeight:"bold",size:"sm",onClick:function(){We(e),Te.closeAll()},children:"Yes"}),(0,B.jsx)(m.z,{size:"sm",bg:"black",onClick:function(){return Te.closeAll()},children:"No"})]})]})}})}(n)}}):""}),(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Je,children:[(0,B.jsx)(y.l,{children:"First name"}),(0,B.jsx)(I.I,{placeholder:"First name",size:"md",type:"text",value:e.firstName.value,onChange:function(e){return Ke(n,"firstName",e.target.value)}}),(0,B.jsx)(N.J1,{children:q})]})}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Last name"}),(0,B.jsx)(I.I,{placeholder:"Last name",size:"md",type:"text",value:e.lastName.value,onChange:function(e){return Ke(n,"lastName",e.target.value)}}),(0,B.jsx)(N.J1,{children:U})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Passport number"}),(0,B.jsx)(I.I,{maxLength:"10",placeholder:"Passport number",size:"md",type:"tel",value:e.passportNumber.value,onChange:function(e){return Ke(n,"passportNumber",e.target.value)}}),(0,B.jsx)(N.J1,{children:U})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Date of birth"}),(0,B.jsx)(I.I,{placeholder:"Date of birth",size:"md",type:"date",value:e.dateOfBirth.value,onChange:function(e){return Ke(n,"dateOfBirth",e.target.value)}}),(0,B.jsx)(N.J1,{children:U})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Image"}),(0,B.jsx)(I.I,{placeholder:"Image",size:"md",type:"text",value:e.image.value||"",onChange:function(e){return Ke(n,"image",e.target.value)}}),(0,B.jsx)(N.J1,{children:'The image should be start with "https://"'})]})]})},n)})),(0,B.jsx)(r.xu,{mb:4,mt:4,children:(0,B.jsx)(m.z,{type:"button",onClick:function(){De.length<5?Ae([].concat((0,l.Z)(De),[{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}])):Te((0,s.Z)({title:"maximum number of applicants is 5",status:"warning",duration:null,isClosable:!1,position:"top"},"duration",3e3))},children:"Add applicant"})}),(0,B.jsx)(r.xu,{mb:4,mt:4,children:(0,B.jsx)(m.z,{type:"submit",children:"Submit"})})]})]})})};var P=function(){return(0,B.jsx)(a.W,{maxW:"6xl",children:(0,B.jsx)(r.xu,{py:20,children:(0,B.jsx)(O,{})})})}},7201:function(e,n,t){t.d(n,{L7:function(){return r},aH:function(){return i},eI:function(){return s},nU:function(){return l}});var a=t(1413),r=function(e){var n=e.applicants,t=e.email,r=e.phone,i=e.expectedTravelDate,s=n.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{dateOfBirth:e.dateOfBirth.split("T")[0],expectedTravelDate:i.split("T")[0],email:t,phone:r})}));return"\n      \n      applicants = ".concat(JSON.stringify(s),'\n      document\n        .querySelector("app-no-form #phone")\n        .dispatchEvent(new Event("ngModelChange"));\n      \n      applicants.map(async (applicant, index) => {\n        await fillInput("name", applicant.firstName, index);\n        await fillInput("surname", applicant.lastName, index);\n        await fillInput("birthLocalDate", applicant.dateOfBirth, index);\n        await fillInput("passport", applicant.passportNumber, index);\n        await fillInput("applicantEmail", applicant.email, index);\n        await fillInput("phone", applicant.phone, index);\n        await fillInput(\n          "expectedDepartureLocalDate",\n          applicant.expectedTravelDate,\n          index\n        );\n      });\n      \n      async function fillInput(field, value, folderIndex) {\n        let ele = document.querySelectorAll(\n          \'app-no-form form input[name="\' + field +\'"]\'\n        )[folderIndex];\n        ele.value = value;\n        ele.dispatchEvent(new Event("input"));\n        ele.dispatchEvent(new Event("change"));\n        ele.dispatchEvent(new Event("compositionend"));\n      }\n      ')},i=function(e){return'\n      document.getElementsByName("email")[1].value = "'.concat(e,'";\n      document.getElementsByName("password")[0].value  =\xa0"Ahmed@2842663";\n      \n      ')},s=function(e,n){switch(e){case"admin":return!1;case"static":default:return!0;case"createdBy":return"assign"===n;case"assigned":return"status"!==n&&"email"!==n}},l=function(e,n,t){return e.filter((function(e){return 0===e.applicants.length||e.applicants.some((function(e){return e[n].startsWith(t.toUpperCase())}))}))}}}]);
//# sourceMappingURL=156.8127a377.chunk.js.map