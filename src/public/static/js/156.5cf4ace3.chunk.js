"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[156],{2156:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(8206),r=n(4087),i=n(2791),s=n(4942),l=n(3433),u=n(1413),c=n(4165),o=n(5861),d=n(9439),p=n(9229),h=n(6907),m=n(2435),x=n(751),f=n(2893),v=n(5946),j=n(2899),g=n(3303),b=n(2392),y=n(8208),I=n(6069),C=n(4125),N=n(311),w=n(2322),Z=n(8886),k=n(7885),S=n(3204),z=n(7845),E=n(2134),D=n(1836),A=n(7201),B=n(184),O=function(){var e=(0,z._C)(),t=(0,d.Z)(e,2),n=t[0],a=t[1],O=a.isLoading,P=a.data,T=a.isSuccess,J=a.error,L=(a.isError,(0,i.useState)("")),U=(0,d.Z)(L,2),K=U[0],W=(U[1],(0,i.useState)("")),q=(0,d.Z)(W,2),F=q[0],_=(q[1],(0,i.useState)("")),H=(0,d.Z)(_,2),X=H[0],Y=(H[1],(0,i.useState)("")),$=(0,d.Z)(Y,2),M=$[0],R=($[1],(0,i.useState)("")),V=(0,d.Z)(R,2),G=V[0],Q=(V[1],(0,i.useState)("")),ee=(0,d.Z)(Q,2),te=ee[0],ne=ee[1],ae=(0,i.useState)(!1),re=(0,d.Z)(ae,2),ie=re[0],se=(re[1],(0,i.useState)("")),le=(0,d.Z)(se,2),ue=le[0],ce=le[1],oe=(0,i.useState)(""),de=(0,d.Z)(oe,2),pe=de[0],he=de[1],me=(0,i.useState)("none"),xe=(0,d.Z)(me,2),fe=xe[0],ve=xe[1],je=(0,i.useState)("none"),ge=(0,d.Z)(je,2),be=ge[0],ye=ge[1],Ie=(0,i.useState)("pending"),Ce=(0,d.Z)(Ie,2),Ne=Ce[0],we=Ce[1],Ze=(0,i.useState)(""),ke=(0,d.Z)(Ze,2),Se=ke[0],ze=ke[1],Ee=(0,i.useState)([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}]),De=(0,d.Z)(Ee,2),Ae=De[0],Be=De[1],Oe=(0,z.PY)(),Pe=Oe.data,Te=Oe.isSuccess,Je=(0,D.p)(),Le=ie&&(""===te||""===ue);function Ue(e){return e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,d.Z)(e,2);return[t[0],t[1].value]})))}))}var Ke=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(t){var a,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Ae.some((function(e){return!e.firstName.value||!e.lastName.value||!e.passportNumber.value})),!ue.startsWith("0")){e.next=5;break}return Je({title:"Phone number shouldnt't start with 0",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 5:if(!(ue.length<10)){e.next=8;break}return Je({title:"Phone number should be 10 numbers",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 8:if(""!==te&&""!==ue&&!a&&""!==pe){e.next=11;break}return Je({title:"Please fill in all required fields",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 11:if(r=new Date,Ae.every((function(e){return new Date(e.dateOfBirth.value).getTime()<r.getTime()}))){e.next=16;break}return Je({title:"Please enter valid date of birth",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 16:return i={expectedTravelDate:t.target.elements.date.value,email:te,phone:"+20"+ue,owner:fe,visa:be,status:Ne,note:Se,applicants:Ue(Ae)},e.next=19,n(i);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){T?(Je({title:"Form submitted successfully!",description:(0,B.jsxs)(p.x,{children:["Copy code ?",(0,B.jsx)(h.h,{size:"sm",children:(0,B.jsx)(m.z,{onClick:function(){return navigator.clipboard.writeText((0,A.L7)((0,u.Z)((0,u.Z)({},P.appointment[0]),{},{applicants:P.applicants.map((function(e){return(0,d.Z)(e,1)[0]}))})))},children:"Copy"})})]}),status:"success",duration:null,isClosable:!0,position:"top"}),he(""),ne(""),ce(""),Be([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}])):null!==J&&void 0!==J&&J.data.message&&Je({title:"".concat(J.data.message),status:"error",duration:null,isClosable:!0,position:"top"})}),[T,Je,J,P]);var We=function(e,t,n){var a=(0,l.Z)(Ae);a[e][t].value=n,Be(a)},qe=function(e){var t=(0,l.Z)(Ae);t.splice(e,1),Be(t)};return(0,B.jsx)(x.K,{children:O?(0,B.jsx)(x.K,{alignItems:"center",children:(0,B.jsx)(S.$,{margin:10,thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})}):(0,B.jsxs)(x.K,{spacing:5,children:[(0,B.jsx)(v.X,{size:"lg",children:"Appointment"}),(0,B.jsxs)("form",{onSubmit:Ke,children:[(0,B.jsx)(j.Z,{variant:"outline",children:(0,B.jsxs)(g.e,{children:[(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Le,children:[(0,B.jsx)(y.l,{children:"Expected travel date"}),(0,B.jsx)(I.I,{name:"date",placeholder:"Select Date and Time",size:"md",type:"date",value:pe,onChange:function(e){return function(e){he(e.target.value)}(e)}}),(0,B.jsx)(C.J1,{children:X})]})}),(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Le,children:[(0,B.jsx)(y.l,{children:"Email"}),(0,B.jsx)(I.I,{placeholder:"Email",type:"email",value:te,onChange:function(e){return ne(e.target.value)}}),(0,B.jsx)(C.J1,{children:M})]})}),(0,B.jsx)(r.xu,{children:(0,B.jsxs)(b.NI,{isInvalid:Le,children:[(0,B.jsx)(y.l,{children:"Phone number"}),(0,B.jsxs)(N.B,{children:[(0,B.jsx)(w.Ui,{children:"+20"}),(0,B.jsx)(I.I,{type:"tel",placeholder:"phone number",pattern:"[0-9]*",maxLength:"10",value:ue,onKeyDown:function(e){"Backspace"!==e.key&&"Delete"!==e.key&&"a"!==e.key&&"A"!==e.key&&(/^\d+$/.test(e.key)||e.preventDefault())},onChange:function(e){return function(e){var t=e.target.value.replace(/\D/g,"");ce(t)}(e)}})]}),(0,B.jsx)(C.J1,{children:G})]})}),(0,B.jsxs)(f.U,{mt:5,children:[(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Owner"}),(0,B.jsx)(Z.P,{textAlign:"center",size:"sm",value:fe,onChange:function(e){return function(e){ve(e.target.value)}(e)},children:Te&&Pe.attributes.ownerEmuns.map((function(e,t){return(0,B.jsx)("option",{value:e,children:e},t)}))})]}),(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Visa"}),(0,B.jsx)(Z.P,{textAlign:"center",value:be,size:"sm",onChange:function(e){return function(e){ye(e.target.value)}(e)},children:Te&&Pe.attributes.visaEmuns.map((function(e,t){return(0,B.jsx)("option",{value:e,children:e},t)}))})]})]}),(0,B.jsxs)(f.U,{mt:5,children:[(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"status"}),(0,B.jsx)(Z.P,{textAlign:"center",value:Ne,size:"sm",onChange:function(e){return function(e){we(e.target.value)}(e)},children:Te&&Pe.attributes.statusEmuns.map((function(e,t){return(0,B.jsx)("option",{value:e,children:e},t)}))})]}),(0,B.jsxs)(b.NI,{children:[(0,B.jsx)(y.l,{children:"Note"}),(0,B.jsx)(I.I,{placeholder:"-",textAlign:"center",value:Se,size:"sm",onChange:function(e){ze(e.target.value)}})]})]})]})}),(0,B.jsx)(v.X,{size:"lg",mt:4,children:"Applicants"}),Ae.map((function(e,t){return(0,B.jsx)(j.Z,{variant:"outline",mt:4,mb:4,children:(0,B.jsxs)(g.e,{children:[(0,B.jsx)(r.xu,{position:"absolute",top:1,right:2,children:Ae.length>1?(0,B.jsx)(k.h,{icon:(0,B.jsx)(E.oHP,{}),onClick:function(){return function(e){Ae.length>1&&Je({title:"Applicant deleted",status:"warning",duration:null,isClosable:!1,position:"top",render:function(){return(0,B.jsxs)(x.K,{bg:"gray.300",p:4,borderRadius:"3",children:[(0,B.jsx)(p.x,{color:"black",mb:2,children:"Are you sure you want to delete this applicant?"}),(0,B.jsxs)(f.U,{spacing:4,justifyContent:"center",children:[(0,B.jsx)(m.z,{colorScheme:"red",fontWeight:"bold",size:"sm",onClick:function(){qe(e),Je.closeAll()},children:"Yes"}),(0,B.jsx)(m.z,{size:"sm",bg:"black",onClick:function(){return Je.closeAll()},children:"No"})]})]})}})}(t)}}):""}),(0,B.jsx)(r.xu,{mb:4,children:(0,B.jsxs)(b.NI,{isInvalid:Le,children:[(0,B.jsx)(y.l,{children:"First name"}),(0,B.jsx)(I.I,{placeholder:"First name",size:"md",type:"text",value:e.firstName.value,onChange:function(e){return We(t,"firstName",e.target.value)}}),(0,B.jsx)(C.J1,{children:F})]})}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Last name"}),(0,B.jsx)(I.I,{placeholder:"Last name",size:"md",type:"text",value:e.lastName.value,onChange:function(e){return We(t,"lastName",e.target.value)}}),(0,B.jsx)(C.J1,{children:K})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Passport number"}),(0,B.jsx)(I.I,{maxLength:"10",placeholder:"Passport number",size:"md",type:"tel",value:e.passportNumber.value,onChange:function(e){return We(t,"passportNumber",e.target.value)}}),(0,B.jsx)(C.J1,{children:K})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Date of birth"}),(0,B.jsx)(I.I,{placeholder:"Date of birth",size:"md",type:"date",value:e.dateOfBirth.value,onChange:function(e){return We(t,"dateOfBirth",e.target.value)}}),(0,B.jsx)(C.J1,{children:K})]}),(0,B.jsxs)(r.xu,{mb:4,children:[(0,B.jsx)(y.l,{children:"Image"}),(0,B.jsx)(I.I,{placeholder:"Image",size:"md",type:"text",value:e.image.value||"",onChange:function(e){return We(t,"image",e.target.value)}}),(0,B.jsx)(C.J1,{children:'The image should be start with "https://"'})]})]})},t)})),(0,B.jsx)(r.xu,{mb:4,mt:4,children:(0,B.jsx)(m.z,{type:"button",onClick:function(){Ae.length<5?Be([].concat((0,l.Z)(Ae),[{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}])):Je((0,s.Z)({title:"maximum number of applicants is 5",status:"warning",duration:null,isClosable:!1,position:"top"},"duration",3e3))},children:"Add applicant"})}),(0,B.jsx)(r.xu,{mb:4,mt:4,children:(0,B.jsx)(m.z,{type:"submit",children:"Submit"})})]})]})})};var P=function(){return(0,B.jsx)(a.W,{maxW:"6xl",children:(0,B.jsx)(r.xu,{py:20,children:(0,B.jsx)(O,{})})})}},7201:function(e,t,n){n.d(t,{L7:function(){return r},aH:function(){return i},eI:function(){return s},nU:function(){return l}});var a=n(1413),r=function(e){var t=e.applicants,n=e.email,r=e.phone,i=e.expectedTravelDate,s=t.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{dateOfBirth:e.dateOfBirth.split("T")[0],expectedTravelDate:i.split("T")[0],email:n,phone:r})}));return"\n      \n      applicants = ".concat(JSON.stringify(s),'\n      document\n        .querySelector("app-no-form #phone")\n        .dispatchEvent(new Event("ngModelChange"));\n      \n      applicants.map(async (applicant, index) => {\n        await fillInput("name", applicant.firstName, index);\n        await fillInput("surname", applicant.lastName, index);\n        await fillInput("birthLocalDate", applicant.dateOfBirth, index);\n        await fillInput("passport", applicant.passportNumber, index);\n        await fillInput("applicantEmail", applicant.email, index);\n        await fillInput("phone", applicant.phone, index);\n        await fillInput(\n          "expectedDepartureLocalDate",\n          applicant.expectedTravelDate,\n          index\n        );\n      });\n      \n      async function fillInput(field, value, folderIndex) {\n        let ele = document.querySelectorAll(\n          \'app-no-form form input[name="\' + field +\'"]\'\n        )[folderIndex];\n        ele.value = value;\n        ele.dispatchEvent(new Event("input"));\n        ele.dispatchEvent(new Event("change"));\n        ele.dispatchEvent(new Event("compositionend"));\n      }\n      ')},i=function(e){return'\n      document.getElementsByName("email")[1].value = "'.concat(e,'";\n      document.getElementsByName("password")[0].value  =\xa0"Ahmed@2842663";\n      \n      ')},s=function(e,t){switch(e){case"admin":return!1;case"static":default:return!0;case"createdBy":return"assign"===t;case"assigned":return"status"!==t&&"email"!==t}},l=function(e,t,n){return e.filter((function(e){return 0===e.applicants.length||e.applicants.some((function(e){return e[t].startsWith(n.toUpperCase())}))}))}}}]);
//# sourceMappingURL=156.5cf4ace3.chunk.js.map