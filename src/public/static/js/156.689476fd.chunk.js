"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[156],{2156:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(8410),a=n(824),s=n(2791),i=n(4942),l=n(3433),u=n(4165),o=n(5861),c=n(9439),d=n(2746),h=n(884),x=n(6762),m=n(7653),p=n(9589),j=n(5090),f=n(9696),v=n(5325),g=n(7298),b=n(548),C=n(3031),N=n(1692),y=n(6675),Z=n(6773),I=n(6108),k=n(2577),S=n(7845),w=n(2134),z=n(9048),A=n(184),P=function(){var e=(0,S._C)(),t=(0,c.Z)(e,2),n=t[0],r=t[1],P=r.isLoading,D=r.data,E=r.isSuccess,O=r.error,B=(r.isError,(0,s.useState)("")),J=(0,c.Z)(B,2),K=J[0],L=(J[1],(0,s.useState)("")),T=(0,c.Z)(L,2),U=T[0],W=(T[1],(0,s.useState)("")),F=(0,c.Z)(W,2),_=F[0],X=(F[1],(0,s.useState)("")),Y=(0,c.Z)(X,2),$=Y[0],q=(Y[1],(0,s.useState)("")),H=(0,c.Z)(q,2),R=H[0],V=(H[1],(0,s.useState)("")),G=(0,c.Z)(V,2),M=G[0],Q=G[1],ee=(0,s.useState)(!1),te=(0,c.Z)(ee,2),ne=te[0],re=(te[1],(0,s.useState)("")),ae=(0,c.Z)(re,2),se=ae[0],ie=ae[1],le=(0,s.useState)(""),ue=(0,c.Z)(le,2),oe=ue[0],ce=ue[1],de=(0,s.useState)("none"),he=(0,c.Z)(de,2),xe=he[0],me=he[1],pe=(0,s.useState)("none"),je=(0,c.Z)(pe,2),fe=je[0],ve=je[1],ge=(0,s.useState)("pending"),be=(0,c.Z)(ge,2),Ce=be[0],Ne=be[1],ye=(0,s.useState)(""),Ze=(0,c.Z)(ye,2),Ie=Ze[0],ke=Ze[1],Se=(0,s.useState)([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}]),we=(0,c.Z)(Se,2),ze=we[0],Ae=we[1],Pe=(0,S.PY)(),De=Pe.data,Ee=Pe.isSuccess,Oe=(0,z.p)(),Be=ne&&(""===M||""===se);function Je(e){return e.map((function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,c.Z)(e,2);return[t[0],t[1].value]})))}))}var Ke=function(){var e=(0,o.Z)((0,u.Z)().mark((function e(t){var r,a,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=ze.some((function(e){return!e.firstName.value||!e.lastName.value||!e.passportNumber.value})),!se.startsWith("0")){e.next=5;break}return Oe({title:"Phone number shouldnt't start with 0",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 5:if(!(se.length<10)){e.next=8;break}return Oe({title:"Phone number should be 10 numbers",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 8:if(""!==M&&""!==se&&!r&&""!==oe){e.next=11;break}return Oe({title:"Please fill in all required fields",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 11:if(a=new Date,ze.every((function(e){return new Date(e.dateOfBirth.value).getTime()<a.getTime()}))){e.next=16;break}return Oe({title:"Please enter valid date of birth",status:"warning",isClosable:!1,position:"top",duration:3e3}),e.abrupt("return");case 16:return s={expectedTravelDate:t.target.elements.date.value,email:M,phone:"+20"+se,owner:xe,visa:fe,status:Ce,note:Ie,applicants:Je(ze)},e.next=19,n(s);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){E?(Oe({title:"Form submitted successfully!",status:"success",duration:null,isClosable:!0,position:"top"}),ce(""),Q(""),ie(""),Ae([{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}])):null!==O&&void 0!==O&&O.data.message&&Oe({title:"".concat(O.data.message),status:"error",duration:null,isClosable:!0,position:"top"})}),[E,Oe,O,D]);var Le=function(e,t,n){var r=(0,l.Z)(ze);r[e][t].value=n,Ae(r)},Te=function(e){var t=(0,l.Z)(ze);t.splice(e,1),Ae(t)};return(0,A.jsx)(d.K,{children:P?(0,A.jsx)(d.K,{alignItems:"center",children:(0,A.jsx)(k.$,{margin:10,thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})}):(0,A.jsxs)(d.K,{spacing:5,children:[(0,A.jsx)(p.X,{size:"lg",children:"Appointment"}),(0,A.jsxs)("form",{onSubmit:Ke,children:[(0,A.jsx)(j.Z,{variant:"outline",children:(0,A.jsxs)(f.e,{children:[(0,A.jsx)(a.xu,{mb:4,children:(0,A.jsxs)(v.NI,{isInvalid:Be,children:[(0,A.jsx)(g.l,{children:"Expected travel date"}),(0,A.jsx)(b.I,{name:"date",placeholder:"Select Date and Time",size:"md",type:"date",value:oe,onChange:function(e){return function(e){ce(e.target.value)}(e)}}),(0,A.jsx)(C.J1,{children:_})]})}),(0,A.jsx)(a.xu,{mb:4,children:(0,A.jsxs)(v.NI,{isInvalid:Be,children:[(0,A.jsx)(g.l,{children:"Email"}),(0,A.jsx)(b.I,{placeholder:"Email",type:"email",value:M,onChange:function(e){return Q(e.target.value)}}),(0,A.jsx)(C.J1,{children:$})]})}),(0,A.jsx)(a.xu,{children:(0,A.jsxs)(v.NI,{isInvalid:Be,children:[(0,A.jsx)(g.l,{children:"Phone number"}),(0,A.jsxs)(N.B,{children:[(0,A.jsx)(y.Ui,{children:"+20"}),(0,A.jsx)(b.I,{type:"tel",placeholder:"phone number",pattern:"[0-9]*",maxLength:"10",value:se,onKeyDown:function(e){"Backspace"!==e.key&&"Delete"!==e.key&&"a"!==e.key&&"A"!==e.key&&(/^\d+$/.test(e.key)||e.preventDefault())},onChange:function(e){return function(e){var t=e.target.value.replace(/\D/g,"");ie(t)}(e)}})]}),(0,A.jsx)(C.J1,{children:R})]})}),(0,A.jsxs)(x.U,{mt:5,children:[(0,A.jsxs)(v.NI,{children:[(0,A.jsx)(g.l,{children:"Owner"}),(0,A.jsx)(Z.P,{textAlign:"center",size:"sm",value:xe,onChange:function(e){return function(e){me(e.target.value)}(e)},children:Ee&&De.attributes.ownerEmuns.map((function(e,t){return(0,A.jsx)("option",{value:e,children:e},t)}))})]}),(0,A.jsxs)(v.NI,{children:[(0,A.jsx)(g.l,{children:"Visa"}),(0,A.jsx)(Z.P,{textAlign:"center",value:fe,size:"sm",onChange:function(e){return function(e){ve(e.target.value)}(e)},children:Ee&&De.attributes.visaEmuns.map((function(e,t){return(0,A.jsx)("option",{value:e,children:e},t)}))})]})]}),(0,A.jsxs)(x.U,{mt:5,children:[(0,A.jsxs)(v.NI,{children:[(0,A.jsx)(g.l,{children:"status"}),(0,A.jsx)(Z.P,{textAlign:"center",value:Ce,size:"sm",onChange:function(e){return function(e){Ne(e.target.value)}(e)},children:Ee&&De.attributes.statusEmuns.map((function(e,t){return(0,A.jsx)("option",{value:e,children:e},t)}))})]}),(0,A.jsxs)(v.NI,{children:[(0,A.jsx)(g.l,{children:"Note"}),(0,A.jsx)(b.I,{placeholder:"-",textAlign:"center",value:Ie,size:"sm",onChange:function(e){ke(e.target.value)}})]})]})]})}),(0,A.jsx)(p.X,{size:"lg",mt:4,children:"Applicants"}),ze.map((function(e,t){return(0,A.jsx)(j.Z,{variant:"outline",mt:4,mb:4,children:(0,A.jsxs)(f.e,{children:[(0,A.jsx)(a.xu,{position:"absolute",top:1,right:2,children:ze.length>1?(0,A.jsx)(I.h,{icon:(0,A.jsx)(w.oHP,{}),onClick:function(){return function(e){ze.length>1&&Oe({title:"Applicant deleted",status:"warning",duration:null,isClosable:!1,position:"top",render:function(){return(0,A.jsxs)(d.K,{bg:"gray.300",p:4,borderRadius:"3",children:[(0,A.jsx)(h.x,{color:"black",mb:2,children:"Are you sure you want to delete this applicant?"}),(0,A.jsxs)(x.U,{spacing:4,justifyContent:"center",children:[(0,A.jsx)(m.z,{colorScheme:"red",fontWeight:"bold",size:"sm",onClick:function(){Te(e),Oe.closeAll()},children:"Yes"}),(0,A.jsx)(m.z,{size:"sm",bg:"black",onClick:function(){return Oe.closeAll()},children:"No"})]})]})}})}(t)}}):""}),(0,A.jsx)(a.xu,{mb:4,children:(0,A.jsxs)(v.NI,{isInvalid:Be,children:[(0,A.jsx)(g.l,{children:"First name"}),(0,A.jsx)(b.I,{placeholder:"First name",size:"md",type:"text",value:e.firstName.value,onChange:function(e){return Le(t,"firstName",e.target.value)}}),(0,A.jsx)(C.J1,{children:U})]})}),(0,A.jsxs)(a.xu,{mb:4,children:[(0,A.jsx)(g.l,{children:"Last name"}),(0,A.jsx)(b.I,{placeholder:"Last name",size:"md",type:"text",value:e.lastName.value,onChange:function(e){return Le(t,"lastName",e.target.value)}}),(0,A.jsx)(C.J1,{children:K})]}),(0,A.jsxs)(a.xu,{mb:4,children:[(0,A.jsx)(g.l,{children:"Passport number"}),(0,A.jsx)(b.I,{maxLength:"10",placeholder:"Passport number",size:"md",type:"tel",value:e.passportNumber.value,onChange:function(e){return Le(t,"passportNumber",e.target.value)}}),(0,A.jsx)(C.J1,{children:K})]}),(0,A.jsxs)(a.xu,{mb:4,children:[(0,A.jsx)(g.l,{children:"Date of birth"}),(0,A.jsx)(b.I,{placeholder:"Date of birth",size:"md",type:"date",value:e.dateOfBirth.value,onChange:function(e){return Le(t,"dateOfBirth",e.target.value)}}),(0,A.jsx)(C.J1,{children:K})]}),(0,A.jsxs)(a.xu,{mb:4,children:[(0,A.jsx)(g.l,{children:"Image"}),(0,A.jsx)(b.I,{placeholder:"Image",size:"md",type:"text",value:e.image.value||"",onChange:function(e){return Le(t,"image",e.target.value)}}),(0,A.jsx)(C.J1,{children:'The image should be start with "https://"'})]})]})},t)})),(0,A.jsx)(a.xu,{mb:4,mt:4,children:(0,A.jsx)(m.z,{type:"button",onClick:function(){ze.length<5?Ae([].concat((0,l.Z)(ze),[{firstName:{value:"",err:""},lastName:{value:"",err:""},passportNumber:{value:"",err:""},dateOfBirth:{value:"",err:""},image:{value:"",err:""}}])):Oe((0,i.Z)({title:"maximum number of applicants is 5",status:"warning",duration:null,isClosable:!1,position:"top"},"duration",3e3))},children:"Add applicant"})}),(0,A.jsx)(a.xu,{mb:4,mt:4,children:(0,A.jsx)(m.z,{type:"submit",children:"Submit"})})]})]})})};var D=function(){return(0,A.jsx)(r.W,{maxW:"6xl",children:(0,A.jsx)(a.xu,{py:20,children:(0,A.jsx)(P,{})})})}}}]);
//# sourceMappingURL=156.689476fd.chunk.js.map